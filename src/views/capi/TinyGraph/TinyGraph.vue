<template>

<svg width="135" height="50" viewBox="0 0 135 50" 
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">

<polyline points="0.0, 6.4724873325634436 0.7988165680473372, 10.375606795539943 1.5976331360946745, 12.236729245465945 2.396449704142012, 11.1787064357249 3.195266272189349, 10.89034039833473 3.994082840236686, 12.018841848028382 4.792899408284024, 19.083280464277347 5.591715976331361, 15.464653854229931 6.390532544378698, 13.495796195768737 7.189349112426036, 12.90153351119073 7.988165680473372, 11.15125323773511 8.78698224852071, 10.489229967095733 9.585798816568047, 9.959994164640243 10.384615384615385, 9.320766889179296 11.183431952662723, 9.528344336706143 11.982248520710058, 6.395982774825073 12.781065088757396, 9.978920301738244 13.579881656804734, 7.13814956224134 14.378698224852071, 4.141435306181232 15.177514792899409, 6.966195273059833 15.976331360946745, 8.650529509692566 16.775147928994084, 6.002972774478612 17.57396449704142, 5.645894342686942 18.37278106508876, 6.350835979367673 19.171597633136095, 8.888455203350635 19.970414201183434, 6.207705806318303 20.76923076923077, 4.598318446521614 21.56804733727811, 7.0596555159521195 22.366863905325445, 7.405847423237676 23.16568047337278, 8.553893294291568 23.964497041420117, 8.05237438229402 24.763313609467456, 6.60798981200169 25.562130177514792, 6.312747919731805 26.36094674556213, 7.549075574794187 27.159763313609467, 6.805264950289505 27.958579881656807, 8.846001703758494 28.757396449704142, 8.674356347532806 29.55621301775148, 7.804055103140708 30.355029585798817, 6.473600134992828 31.153846153846157, 6.180381304407295 31.95266272189349, 5.596757165323071 32.751479289940825, 5.880100081862279 33.55029585798817, 4.022586756029377 34.349112426035504, 0.0 35.14792899408284, 5.780213208643289 35.94674556213018, 1.7736545368220211 36.74556213017752, 5.946642340641698 37.54437869822485, 4.333393982384493 38.34319526627219, 4.0764118499291975 39.142011834319526, 3.403500582144002 39.94082840236687, 5.455221241645781 40.7396449704142, 6.6111440372305275 41.53846153846154, 6.718523139705939 42.337278106508876, 7.552142609077486 43.13609467455622, 8.159346886294177 43.93491124260355, 8.548871992753131 44.73372781065089, 9.287218445258482 45.532544378698226, 13.066133260128751 46.33136094674556, 11.044475832022343 47.1301775147929, 15.659430640935321 47.928994082840234, 15.43951917036499 48.72781065088758, 14.829042006979842 49.52662721893491, 15.709771930750973 50.32544378698225, 14.574827080763148 51.124260355029584, 21.477572656059568 51.92307692307693, 20.018583706714185 52.72189349112426, 19.890199617342567 53.5207100591716, 19.811548120822266 54.319526627218934, 14.883855747798288 55.11834319526627, 15.17621442252331 55.91715976331361, 15.649963532266465 56.71597633136094, 13.823744209779102 57.514792899408285, 13.957610700359375 58.31360946745562, 12.867921718506043 59.11242603550296, 12.696078235868436 59.91124260355029, 11.769729056429739 60.710059171597635, 9.825752051267377 61.50887573964497, 12.382981327335536 62.307692307692314, 14.84981918793381 63.10650887573964, 19.144056268130573 63.90532544378698, 18.18061317539289 64.70414201183432, 15.963084557474144 65.50295857988165, 12.661351225757134 66.30177514792899, 12.827832134999905 67.10059171597634, 11.990363610726826 67.89940828402366, 12.418877645202667 68.69822485207101, 13.2388421596038 69.49704142011834, 15.931471508877054 70.29585798816568, 15.281929156342219 71.09467455621302, 10.332635662640598 71.89349112426036, 12.563716013512213 72.6923076923077, 15.617228672655184 73.49112426035504, 15.855077722297201 74.28994082840237, 15.814704945832892 75.0887573964497, 15.615027487251515 75.88757396449704, 18.43995101733916 76.68639053254438, 15.65161751927559 77.48520710059172, 19.40094210429138 78.28402366863905, 22.10149514455995 79.0828402366864, 29.26494532413535 79.88165680473374, 32.37912662402095 80.68047337278107, 29.833760055611357 81.4792899408284, 30.96877845583108 82.27810650887574, 29.576236339447178 83.07692307692308, 26.092291359846616 83.87573964497041, 29.34459723523965 84.67455621301775, 29.157734115520295 85.4733727810651, 31.347522934589005 86.27218934911244, 34.432738025691314 87.07100591715975, 33.61800377718925 87.8698224852071, 32.55602796810362 88.66863905325444, 30.89571041745448 89.46745562130178, 29.536100348873294 90.26627218934911, 29.385690804102495 91.06508875739645, 29.75069658707386 91.8639053254438, 25.995855283845387 92.66272189349112, 26.373687832641274 93.46153846153845, 27.2383095830211 94.2603550295858, 27.427191074417006 95.05917159763314, 23.776566329858355 95.85798816568047, 24.002890277379894 96.65680473372781, 24.69116507280769 97.45562130177515, 27.553011305361107 98.2544378698225, 30.801967155243297 99.05325443786982, 28.827176700424616 99.85207100591715, 30.115629037128205 100.6508875739645, 30.07542323497872 101.44970414201183, 31.553011533187597 102.24852071005917, 29.665045858544794 103.04733727810651, 30.91894760458426 103.84615384615385, 29.596423867944523 104.64497041420118, 33.65558903644361 105.44378698224853, 33.016992848780724 106.24260355029585, 24.689461529092945 107.0414201183432, 20.922017847119516 107.84023668639053, 19.68028493398762 108.63905325443787, 20.74913532524679 109.43786982248521, 19.28255861662112 110.23668639053254, 17.70870241069431 111.03550295857988, 17.67874767693276 111.83431952662723, 18.391719724352505 112.63313609467457, 19.418504180275374 113.43195266272188, 21.266099252127386 114.23076923076923, 22.945729167778378 115.02958579881657, 21.115022785396896 115.82840236686391, 25.24181904330704 116.62721893491124, 31.558265799032938 117.42603550295858, 31.9005094586564 118.22485207100593, 34.72246529168669 119.02366863905324, 40.1771604586038 119.82248520710058, 40.22129229359893 120.62130177514793, 40.68812307120281 121.42011834319527, 43.20753806478323 122.2189349112426, 41.62526752543527 123.01775147928994, 41.03756699159806 123.81656804733728, 40.7739583835048 124.61538461538463, 36.87046939613704 125.41420118343194, 39.219223406083515 126.21301775147928, 41.272932529041256 127.01183431952663, 40.93409344436601 127.81065088757396, 39.310569985631595 128.60946745562129, 38.206923182753094 129.40828402366864, 44.583086770811704 130.20710059171597, 49.35450386092327 131.0059171597633, 45.01544799728316 131.80473372781066, 50.0 132.60355029585799, 48.70090974150048 133.40236686390534, 46.03535927195959 134.20118343195267, 40.440982078047554" fill="none" stroke="#ed5565" stroke-width="1.25"/>
</svg>
</template>

<script>
import { mapState } from 'vuex'

export default {
  name: 'TinyGraph',
  components: {},
  props: {
    marketId: Number,
  },
  data () {
    return {
      marketDataPoints: []
    }
  },
  computed: {
    ...mapState('capi', ['market_last_7_points']),
    computedOptions () {
      return {
        scales: {
          xAxes: [{
            display: false,
            offset: true,
            ticks: { display: false },
          }],
          yAxes: [{
            display: false,
            offset: true,
            ticks: { display: false },
          }]
        },
        elements: {
          line: {
            borderWidth: 3
          },
          point: {
            radius: 3,
            hitRadius: 10,
            hoverRadius: 4,
          }
        },
        legend: { display: false },
        tooltips: { enabled: true, displayColors: false },
        maintainAspectRatio: false,
        responsive: false,
        // animation: { duration: 0 }, // general animation time
        // hover: { animationDuration: 0 }, // duration of animations when hovering an item
        // responsiveAnimationDuration: 0, // animation duration after a resize
      }
    },
  },
  methods: {
    preparedGraphDataSet () {
      return {
        data: [],
        backgroundColor: 'transparent',
        borderColor: 'orange',
        pointBorderColor: 'orange',
        pointBackgroundColor: 'orange',
      }
    },
    setDataMarketGraph() {
      var data = [0, 0, 0, 0, 0, 0, 0]
      if (this.market_last_7_points[this.marketId])
        data = this.market_last_7_points[this.marketId]['value']
      var res = this.preparedGraphDataSet()
      res['data'] = data
      this.$set(this.marketDataPoints, 0, res)
    },
  },
  created() {
    this.$store.dispatch('capi/fetch_daily_market_points', this.marketId).then(() => {
      this.setDataMarketGraph()
    })
  },
  mounted() {},
  beforeDestroy () {},
}
</script>

<style scoped>
</style>